{
  "meta": {
    "name": "aggressive_hairpins_mpc_xcmg",
    "version": 2,
    "description": "XCMG XDE360 (220-ton) - Aggressive hairpins with predictive MPC",
    "control_mode": "velocity_mpc"
  },
  "timing": {
    "dt_s": 0.01,
    "duration_s": 120.0,
    "log_hz": 10.0,
    "real_time_mode": true
  },
  "mpc_config": {
    "target_velocity_mps": 12.0,
    "prediction_horizon": 10,
    "control_horizon": 3,
    "time_step": 0.01,
    
    "weight_velocity": 150.0,
    "weight_accel": 2.0,
    "weight_jerk": 0.5,
    
    "max_torque": 145000.0,
    "max_brake_force": 180.0,
    "max_accel": 1.2,
    "max_decel": 3.0,
    
    "enable_adaptation": true,
    "adaptation_rate": 0.08
  },
  "defaults": {
    "system_enable": true,
    "mode": 0,
    "drive_torque_cmd_nm": 0.0,
    "brake_cmd_pct": 0.0,
    "steer_cmd_deg": 0.0
  },
  "segments": [
    {
      "t0": 0.0,
      "t1": 10.0,
      "steer_cmd_deg": 0.0,
      "comment": "Initial straight - rapid model learning"
    },
    {
      "t0": 10.0,
      "t1": 14.0,
      "steer_cmd_deg": 20.0,
      "comment": "Sharp right - MPC predictive braking advantage"
    },
    {
      "t0": 14.0,
      "t1": 22.0,
      "steer_cmd_deg": 0.0,
      "comment": "Recovery - smooth accel/brake transition"
    },
    {
      "t0": 22.0,
      "t1": 26.0,
      "steer_cmd_deg": -20.0,
      "comment": "Sharp left - anticipatory deceleration"
    },
    {
      "t0": 26.0,
      "t1": 34.0,
      "steer_cmd_deg": 0.0,
      "comment": "Quick recovery - optimized control"
    },
    {
      "t0": 34.0,
      "t1": 38.0,
      "steer_cmd_deg": 25.0,
      "comment": "Very sharp right - strong brake application"
    },
    {
      "t0": 38.0,
      "t1": 46.0,
      "steer_cmd_deg": 0.0,
      "comment": "Efficient recovery with prediction"
    },
    {
      "t0": 46.0,
      "t1": 50.0,
      "steer_cmd_deg": -25.0,
      "comment": "Very sharp left - MPC handles gracefully"
    },
    {
      "t0": 50.0,
      "t1": 58.0,
      "steer_cmd_deg": 0.0,
      "comment": "Fast recovery - adapted model helps"
    },
    {
      "t0": 58.0,
      "t1": 62.0,
      "steer_cmd_deg": 22.0,
      "comment": "Sharp right - high confidence control"
    },
    {
      "t0": 62.0,
      "t1": 70.0,
      "steer_cmd_deg": 0.0,
      "comment": "Stable recovery - minimal overshoot"
    },
    {
      "t0": 70.0,
      "t1": 74.0,
      "steer_cmd_deg": -22.0,
      "comment": "Sharp left - demonstrating MPC advantage"
    },
    {
      "t0": 74.0,
      "t1": 82.0,
      "steer_cmd_deg": 0.0,
      "comment": "Clean recovery"
    },
    {
      "t0": 82.0,
      "t1": 86.0,
      "steer_cmd_deg": 18.0,
      "comment": "Final sharp right"
    },
    {
      "t0": 86.0,
      "t1": 94.0,
      "steer_cmd_deg": 0.0,
      "comment": "Recovery"
    },
    {
      "t0": 94.0,
      "t1": 98.0,
      "steer_cmd_deg": -18.0,
      "comment": "Final sharp left"
    },
    {
      "t0": 98.0,
      "t1": -1.0,
      "steer_cmd_deg": 0.0,
      "comment": "Final stabilization - minimal settling time"
    }
  ],
  "tuning_notes": {
    "description": "Aggressive MPC tuning for sharp hairpin maneuvers",
    "vehicle_params": {
      "mass_kg": 220000,
      "max_motor_torque_nm": 145000,
      "max_brake_force_kn": 180,
      "wheel_radius_m": 1.95,
      "gear_ratio": 28.0
    },
    "aggressive_tuning_rationale": {
      "max_decel": "3.0 m/sÂ² - allows stronger braking for hairpins",
      "weight_velocity": "150.0 - slightly relaxed to allow smoother recovery",
      "weight_accel": "2.0 - higher penalty for harsh acceleration changes",
      "weight_jerk": "0.5 - stronger jerk penalty for passenger comfort",
      "adaptation_rate": "0.08 - very fast learning for dynamic maneuvers",
      "prediction_horizon": "10 steps - critical for anticipating sharp turns"
    },
    "mpc_advantages_in_hairpins": {
      "predictive_braking": "Brakes BEFORE the turn, not during",
      "trajectory_optimization": "Plans smooth velocity profile through turn",
      "constraint_satisfaction": "Never violates max_decel limit",
      "recovery_planning": "Optimal re-acceleration after turn exit"
    },
    "expected_vs_pid": {
      "pid_behavior": "Reactive - brakes hard during turn, overshoots",
      "mpc_behavior": "Proactive - decels before turn, smooth recovery",
      "comfort": "MPC produces 30-40% less jerk",
      "lap_time": "MPC should be 5-10% faster through course"
    }
  }
}